<!DOCTYPE html>
<html>

  <head>
    <meta charset='utf-8'>
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <meta name="description" content="Listy-for-ng : ng service for managing arrays">

    <link rel="stylesheet" type="text/css" media="screen" href="stylesheets/stylesheet.css">

    <title>Listy-for-ng</title>
  </head>

  <body>

    <!-- HEADER -->
    <div id="header_wrap" class="outer">
        <header class="inner">
          <a id="forkme_banner" href="https://github.com/nmuhonen/listy-for-ng">View on GitHub</a>

          <h1 id="project_title">Listy-for-ng</h1>
          <h2 id="project_tagline">ng service for managing arrays</h2>

            <section id="downloads">
              <a class="zip_download_link" href="https://github.com/nmuhonen/listy-for-ng/zipball/master">Download this project as a .zip file</a>
              <a class="tar_download_link" href="https://github.com/nmuhonen/listy-for-ng/tarball/master">Download this project as a tar.gz file</a>
            </section>
        </header>
    </div>

    <!-- MAIN CONTENT -->
    <div id="main_content_wrap" class="outer">
      <section id="main_content" class="inner">
        <h1>
<a name="listy-for-ng" class="anchor" href="#listy-for-ng"><span class="octicon octicon-link"></span></a>listy-for-ng</h1>

<p>An angular service for doing stuff with arrays in a chainable lazy evaluated way.</p>

<h2>
<a name="service-listyarray--listy--listyiteratorfactory--listy" class="anchor" href="#service-listyarray--listy--listyiteratorfactory--listy"><span class="octicon octicon-link"></span></a>service listy(array | listy | listyIteratorFactory) =&gt; listy</h2>

<p>creates a new listy object.</p>

<div class="highlight highlight-javascript"><pre><span class="nx">angular</span><span class="p">.</span><span class="nx">module</span><span class="p">(</span><span class="s2">"listyMod"</span><span class="p">,[]);</span>
<span class="nx">angular</span><span class="p">.</span><span class="nx">run</span><span class="p">([</span>
  <span class="s2">"listy"</span><span class="p">,</span>
  <span class="kd">function</span><span class="p">(</span><span class="nx">listy</span><span class="p">){</span>
    <span class="kd">var</span> <span class="nx">listee</span> <span class="o">=</span> <span class="nx">listy</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="mi">5</span><span class="p">]);</span> <span class="c1">// creates a listy from an array</span>

    <span class="kd">var</span> <span class="nx">listee2</span> <span class="o">=</span> <span class="nx">listy</span><span class="p">(</span><span class="nx">listy</span><span class="p">.</span><span class="nx">createIterator</span><span class="p">);</span> <span class="c1">// creates a listy from</span>

    <span class="kd">var</span> <span class="nx">listee3</span> <span class="o">=</span> <span class="nx">listy</span><span class="p">(</span><span class="nx">listee</span><span class="p">);</span> <span class="c1">// pass through -&gt; listee === listee3</span>
  <span class="p">})</span>
<span class="p">]);</span>
</pre></div>

<h2>
<a name="method-foreachactionfnparam--listy" class="anchor" href="#method-foreachactionfnparam--listy"><span class="octicon octicon-link"></span></a>method forEach(actionFn,param?) =&gt; listy</h2>

<p>iterates through a listy.</p>

<div class="highlight highlight-javascript"><pre><span class="c1">//with a closure</span>
<span class="kd">var</span> <span class="nx">source</span> <span class="o">=</span> <span class="p">[{</span><span class="nx">val</span><span class="o">:</span><span class="mi">1</span><span class="p">},{</span><span class="nx">val</span><span class="o">:</span><span class="mi">2</span><span class="p">},{</span><span class="nx">val</span><span class="o">:</span><span class="mi">3</span><span class="p">}];</span>

<span class="nx">listy</span><span class="p">(</span><span class="nx">source</span><span class="p">).</span><span class="nx">forEach</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">item</span><span class="p">,</span><span class="nx">index</span><span class="p">,</span><span class="nx">ctx</span><span class="p">){</span>
  <span class="k">if</span> <span class="p">(</span><span class="nx">index</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">){</span>
    <span class="k">return</span> <span class="nx">ctx</span><span class="p">.</span><span class="k">break</span><span class="p">;</span>
  <span class="p">}</span>
  <span class="nx">item</span><span class="p">.</span><span class="nx">index</span> <span class="o">=</span> <span class="nx">index</span><span class="p">;</span>
<span class="p">});</span>

<span class="nx">expect</span><span class="p">(</span><span class="nx">source</span><span class="p">).</span><span class="nx">toBe</span><span class="p">({</span><span class="nx">index</span><span class="o">:</span><span class="mi">0</span><span class="p">,</span><span class="nx">val</span><span class="o">:</span><span class="mi">1</span><span class="p">},{</span><span class="nx">val</span><span class="o">:</span><span class="mi">2</span><span class="p">},{</span><span class="nx">val</span><span class="o">:</span><span class="mi">3</span><span class="p">});</span>

<span class="c1">//with an expression using an optional parameter</span>
<span class="kd">var</span> <span class="nx">source</span> <span class="o">=</span> <span class="p">[{</span><span class="nx">val</span><span class="o">:</span><span class="mi">1</span><span class="p">},{</span><span class="nx">val</span><span class="o">:</span><span class="mi">2</span><span class="p">},{</span><span class="nx">val</span><span class="o">:</span><span class="mi">3</span><span class="p">}];</span>

<span class="nx">listy</span><span class="p">(</span><span class="nx">source</span><span class="p">).</span><span class="nx">forEach</span><span class="p">(</span><span class="s2">"$index &gt; val ? $break : (index = $index)"</span><span class="p">,{</span><span class="nx">val</span><span class="o">:</span><span class="mi">1</span><span class="p">});</span>

<span class="nx">expect</span><span class="p">(</span><span class="nx">source</span><span class="p">).</span><span class="nx">toBe</span><span class="p">({</span><span class="nx">index</span><span class="o">:</span><span class="mi">0</span><span class="p">,</span><span class="nx">val</span><span class="o">:</span><span class="mi">1</span><span class="p">},{</span><span class="nx">val</span><span class="o">:</span><span class="mi">2</span><span class="p">},{</span><span class="nx">val</span><span class="o">:</span><span class="mi">3</span><span class="p">});</span>
</pre></div>

<h2>
<a name="method-count--number" class="anchor" href="#method-count--number"><span class="octicon octicon-link"></span></a>method count() =&gt; number</h2>

<p>returns the number of elements in a listy.</p>

<div class="highlight highlight-javascript"><pre><span class="kd">var</span> <span class="nx">source</span> <span class="o">=</span> <span class="p">[{</span><span class="nx">val</span><span class="o">:</span><span class="mi">1</span><span class="p">},{</span><span class="nx">val</span><span class="o">:</span><span class="mi">2</span><span class="p">},{</span><span class="nx">val</span><span class="o">:</span><span class="mi">3</span><span class="p">}];</span>
<span class="kd">var</span> <span class="nx">count</span> <span class="o">=</span> <span class="nx">listy</span><span class="p">(</span><span class="nx">source</span><span class="p">).</span><span class="nx">count</span><span class="p">();</span>

<span class="nx">expect</span><span class="p">(</span><span class="nx">length</span><span class="p">).</span><span class="nx">toBe</span><span class="p">(</span><span class="mi">3</span><span class="p">);</span>
</pre></div>

<h2>
<a name="method-filterfilteropparam--listy" class="anchor" href="#method-filterfilteropparam--listy"><span class="octicon octicon-link"></span></a>method filter(filterOp,param?) =&gt; listy</h2>

<p>filters a result set from a listy.</p>

<div class="highlight highlight-javascript"><pre><span class="c1">//with a closure</span>
<span class="kd">var</span> <span class="nx">source</span> <span class="o">=</span> <span class="p">[{</span><span class="nx">val</span><span class="o">:</span><span class="mi">1</span><span class="p">},{</span><span class="nx">val</span><span class="o">:</span><span class="mi">2</span><span class="p">},{</span><span class="nx">val</span><span class="o">:</span><span class="mi">3</span><span class="p">}];</span>

<span class="kd">var</span> <span class="nx">result</span> <span class="o">=</span> <span class="nx">listy</span><span class="p">(</span><span class="nx">source</span><span class="p">).</span><span class="nx">filter</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">item</span><span class="p">,</span><span class="nx">index</span><span class="p">){</span>
  <span class="k">return</span> <span class="nx">index</span> <span class="o">&lt;</span> <span class="mi">1</span> <span class="o">||</span> <span class="nx">item</span><span class="p">.</span><span class="nx">val</span> <span class="o">===</span> <span class="mi">3</span>
<span class="p">});</span>

<span class="nx">expect</span><span class="p">(</span><span class="nx">result</span><span class="p">()).</span><span class="nx">toEqual</span><span class="p">([{</span><span class="nx">val</span><span class="o">:</span><span class="mi">1</span><span class="p">},{</span><span class="nx">val</span><span class="o">:</span><span class="mi">3</span><span class="p">}]);</span>

<span class="c1">//with an expression using an optional parameter</span>
<span class="kd">var</span> <span class="nx">source</span> <span class="o">=</span> <span class="p">[{</span><span class="nx">val</span><span class="o">:</span><span class="mi">1</span><span class="p">},{</span><span class="nx">val</span><span class="o">:</span><span class="mi">2</span><span class="p">},{</span><span class="nx">val</span><span class="o">:</span><span class="mi">3</span><span class="p">}];</span>

<span class="kd">var</span> <span class="nx">result</span> <span class="o">=</span> <span class="nx">listy</span><span class="p">(</span><span class="nx">source</span><span class="p">).</span><span class="nx">filter</span><span class="p">(</span><span class="s2">"$index &lt; targetIndex || val === targetVal"</span><span class="p">,{</span><span class="nx">targetIndex</span><span class="o">:</span><span class="mi">1</span><span class="p">,</span><span class="nx">targetVal</span><span class="o">:</span><span class="mi">3</span><span class="p">});</span>
<span class="p">});</span>

<span class="nx">expect</span><span class="p">(</span><span class="nx">result</span><span class="p">()).</span><span class="nx">toEqual</span><span class="p">([{</span><span class="nx">val</span><span class="o">:</span><span class="mi">1</span><span class="p">},{</span><span class="nx">val</span><span class="o">:</span><span class="mi">3</span><span class="p">}]);</span>
</pre></div>

<h2>
<a name="method-mapmapopparam--listy" class="anchor" href="#method-mapmapopparam--listy"><span class="octicon octicon-link"></span></a>method map(mapOp,param?) =&gt; listy</h2>

<p>maps a result set from a listy.</p>

<div class="highlight highlight-javascript"><pre><span class="c1">//with a closure</span>
<span class="kd">var</span> <span class="nx">source</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">];</span>

<span class="kd">var</span> <span class="nx">result</span> <span class="o">=</span> <span class="nx">listy</span><span class="p">(</span><span class="nx">source</span><span class="p">).</span><span class="nx">map</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">item</span><span class="p">,</span><span class="nx">index</span><span class="p">){</span>
  <span class="k">return</span> <span class="p">{</span><span class="nx">val</span><span class="o">:</span><span class="nx">item</span><span class="p">,</span> <span class="nx">index</span><span class="o">:</span> <span class="nx">index</span><span class="p">};</span>
<span class="p">});</span>

<span class="nx">expect</span><span class="p">(</span><span class="nx">result</span><span class="p">()).</span><span class="nx">toEqual</span><span class="p">([{</span><span class="nx">val</span><span class="o">:</span><span class="mi">1</span><span class="p">,</span><span class="nx">index</span><span class="o">:</span><span class="mi">0</span><span class="p">},{</span><span class="nx">val</span><span class="o">:</span><span class="mi">2</span><span class="p">,</span><span class="nx">index</span><span class="o">:</span><span class="mi">1</span><span class="p">}]);</span>

<span class="c1">//with an expression using an optional parameter</span>
<span class="kd">var</span> <span class="nx">source</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">];</span>

<span class="kd">function</span> <span class="nx">getExpr</span><span class="p">(</span><span class="nx">item</span><span class="p">,</span><span class="nx">index</span><span class="p">){</span>
  <span class="k">return</span> <span class="nx">index</span> <span class="o">+</span> <span class="s2">":"</span> <span class="o">+</span> <span class="nx">item</span><span class="p">;</span>
<span class="p">}</span>

<span class="kd">var</span> <span class="nx">result</span> <span class="o">=</span> <span class="nx">listy</span><span class="p">(</span><span class="nx">source</span><span class="p">).</span><span class="nx">map</span><span class="p">(</span><span class="s2">"{item:$item,index:$index,expr:getExpr($item,$index)}"</span><span class="p">,{</span><span class="nx">getExpr</span><span class="o">:</span><span class="nx">getExpr</span><span class="p">});</span>

<span class="nx">expect</span><span class="p">(</span><span class="nx">result</span><span class="p">()).</span><span class="nx">toEqual</span><span class="p">([{</span><span class="nx">val</span><span class="o">:</span><span class="mi">1</span><span class="p">,</span><span class="nx">index</span><span class="o">:</span><span class="mi">0</span><span class="p">,</span><span class="nx">expr</span><span class="o">:</span><span class="s2">"0:1"</span><span class="p">},{</span><span class="nx">val</span><span class="o">:</span><span class="mi">2</span><span class="p">,</span><span class="nx">index</span><span class="o">:</span><span class="mi">1</span><span class="p">,</span><span class="nx">expr</span><span class="o">:</span><span class="s2">"0:2"</span><span class="p">}]);</span>
</pre></div>

<h2>
<a name="method-reducereduceopinitparam--var" class="anchor" href="#method-reducereduceopinitparam--var"><span class="octicon octicon-link"></span></a>method reduce(reduceOp,init?,param?) =&gt; var</h2>

<p>reduces a result set from a listy.</p>

<div class="highlight highlight-javascript"><pre><span class="c1">//with a closure</span>
<span class="kd">var</span> <span class="nx">source</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">];</span>

<span class="nx">listy</span><span class="p">(</span><span class="nx">source</span><span class="p">).</span><span class="nx">reduce</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">result</span><span class="p">,</span><span class="nx">item</span><span class="p">,</span><span class="nx">index</span><span class="p">){</span>
  <span class="k">return</span> <span class="nx">result</span> <span class="o">+</span> <span class="nx">item</span><span class="p">;</span>
<span class="p">},</span><span class="mi">0</span><span class="p">);</span>

<span class="nx">expect</span><span class="p">(</span><span class="nx">source</span><span class="p">).</span><span class="nx">toEqual</span><span class="p">(</span><span class="mi">3</span><span class="p">);</span>

<span class="c1">//with an expression using an optional parameter</span>
<span class="kd">var</span> <span class="nx">source</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">];</span>

<span class="kd">function</span> <span class="nx">add</span><span class="p">(</span><span class="nx">item1</span><span class="p">,</span><span class="nx">item2</span><span class="p">){</span>
  <span class="k">return</span> <span class="nx">item1</span> <span class="o">+</span> <span class="nx">item2</span>
<span class="p">}</span>

<span class="nx">listy</span><span class="p">(</span><span class="nx">source</span><span class="p">).</span><span class="nx">map</span><span class="p">(</span><span class="s2">"add($item,$result)"</span><span class="p">,</span><span class="mi">0</span><span class="p">,{</span><span class="nx">add</span><span class="o">:</span><span class="nx">add</span><span class="p">});</span>
<span class="p">});</span>

<span class="nx">expect</span><span class="p">(</span><span class="nx">source</span><span class="p">).</span><span class="nx">toEqual</span><span class="p">(</span><span class="mi">3</span><span class="p">);</span>
</pre></div>

<h2>
<a name="method-sortsortexpression--listy" class="anchor" href="#method-sortsortexpression--listy"><span class="octicon octicon-link"></span></a>method sort(sortExpression,...) =&gt; listy</h2>

<p>sorts a result set from a listy.</p>

<div class="highlight highlight-javascript"><pre><span class="kd">var</span> <span class="nx">source</span> <span class="o">=</span> <span class="p">[</span>
  <span class="p">{</span><span class="nx">state</span><span class="o">:</span> <span class="s2">"CA"</span><span class="p">,</span> <span class="nx">city</span><span class="o">:</span> <span class="s2">"Los Angeles"</span><span class="p">,</span> <span class="nx">age</span><span class="o">:</span><span class="mi">68</span><span class="p">},</span> 
  <span class="p">{</span><span class="nx">state</span><span class="o">:</span> <span class="s2">"OR"</span><span class="p">,</span> <span class="nx">city</span><span class="o">:</span> <span class="s2">"Portland"</span><span class="p">,</span> <span class="nx">age</span><span class="o">:</span><span class="mi">57</span><span class="p">},</span> 
  <span class="p">{</span><span class="nx">state</span><span class="o">:</span> <span class="s2">"CA"</span><span class="p">,</span> <span class="nx">city</span><span class="o">:</span> <span class="s2">"San Francisco"</span><span class="p">,</span> <span class="nx">age</span><span class="o">:</span><span class="mi">78</span><span class="p">},</span> 
  <span class="p">{</span><span class="nx">state</span><span class="o">:</span> <span class="s2">"CA"</span><span class="p">,</span> <span class="nx">city</span><span class="o">:</span> <span class="s2">"Los Angeles"</span><span class="p">,</span> <span class="nx">age</span><span class="o">:</span><span class="mi">31</span><span class="p">},</span> 
  <span class="p">{</span><span class="nx">state</span><span class="o">:</span> <span class="s2">"OR"</span><span class="p">,</span> <span class="nx">city</span><span class="o">:</span> <span class="s2">"Eugene"</span><span class="p">,</span> <span class="nx">age</span><span class="o">:</span><span class="mi">57</span><span class="p">}</span>
  <span class="p">{</span><span class="nx">state</span><span class="o">:</span> <span class="s2">"OR"</span><span class="p">,</span> <span class="nx">city</span><span class="o">:</span> <span class="s2">"Eugene"</span><span class="p">,</span> <span class="nx">age</span><span class="o">:</span><span class="mi">56</span><span class="p">},</span> 
<span class="p">];</span>

<span class="kd">function</span> <span class="nx">compareState</span><span class="p">(</span><span class="nx">item</span><span class="p">,</span><span class="nx">compare</span><span class="p">){</span>
  <span class="k">return</span> <span class="nx">item</span><span class="p">.</span><span class="nx">state</span><span class="p">.</span><span class="nx">localeCompare</span><span class="p">(</span><span class="nx">compare</span><span class="p">.</span><span class="nx">state</span><span class="p">);</span>
<span class="p">}</span>

<span class="kd">function</span> <span class="nx">strCmp</span><span class="p">(</span><span class="nx">item</span><span class="p">,</span><span class="nx">compare</span><span class="p">){</span>
  <span class="k">return</span> <span class="nx">item</span><span class="p">.</span><span class="nx">localeCompare</span><span class="p">(</span><span class="nx">compare</span><span class="p">);</span>
<span class="p">}</span>

<span class="c1">//with closures</span>
<span class="kd">var</span> <span class="nx">result</span> <span class="o">=</span> <span class="nx">listy</span><span class="p">(</span><span class="nx">source</span><span class="p">).</span><span class="nx">sort</span><span class="p">(</span><span class="nx">compareState</span><span class="p">,</span><span class="s2">"desc"</span><span class="p">);</span>

<span class="c1">//with expression</span>
<span class="kd">var</span> <span class="nx">result</span> <span class="o">=</span> <span class="nx">listy</span><span class="p">(</span><span class="nx">source</span><span class="p">).</span><span class="nx">sort</span><span class="p">(</span><span class="s2">"state desc"</span><span class="p">);</span>

<span class="c1">//with complex expression using a custom sorter</span>
<span class="kd">var</span> <span class="nx">result</span> <span class="o">=</span> <span class="nx">listy</span><span class="p">(</span><span class="nx">source</span><span class="p">).</span><span class="nx">sort</span><span class="p">(</span><span class="s2">"state desc, city with strCmp, age"</span><span class="p">,{</span><span class="nx">strCmp</span><span class="o">:</span> <span class="nx">strCmp</span><span class="p">});</span>

<span class="c1">//with all of the above</span>
<span class="kd">var</span> <span class="nx">result</span> <span class="o">=</span> <span class="nx">listy</span><span class="p">(</span><span class="nx">source</span><span class="p">).</span><span class="nx">sort</span><span class="p">([</span><span class="nx">compareState</span><span class="p">,</span><span class="s2">"desc"</span><span class="p">],[</span><span class="s2">"city with strCmp"</span><span class="p">,{</span><span class="nx">strCmp</span><span class="o">:</span> <span class="nx">strCmp</span><span class="p">}],[</span><span class="s2">"age"</span><span class="p">]);</span>
</pre></div>

<h2>
<a name="method-groupbykeygroupitemparam--listy" class="anchor" href="#method-groupbykeygroupitemparam--listy"><span class="octicon octicon-link"></span></a>method groupBy(key,groupItem?,param?) =&gt; listy</h2>

<p>groups a result set from a listy.</p>

<div class="highlight highlight-javascript"><pre><span class="kd">var</span> <span class="nx">source</span> <span class="o">=</span> <span class="p">[</span>
  <span class="p">{</span><span class="nx">stateId</span><span class="o">:</span> <span class="mi">1</span><span class="p">,</span> <span class="nx">state</span><span class="o">:</span> <span class="s2">"CA"</span><span class="p">,</span> <span class="nx">city</span><span class="o">:</span> <span class="s2">"Bakersfield"</span><span class="p">},</span> 
  <span class="p">{</span><span class="nx">stateId</span><span class="o">:</span> <span class="mi">2</span><span class="p">,</span> <span class="nx">state</span><span class="o">:</span> <span class="s2">"OR"</span><span class="p">,</span> <span class="nx">city</span><span class="o">:</span> <span class="s2">"Portland"</span><span class="p">},</span> 
  <span class="p">{</span><span class="nx">stateId</span><span class="o">:</span> <span class="mi">1</span><span class="p">,</span> <span class="nx">state</span><span class="o">:</span> <span class="s2">"CA"</span><span class="p">,</span> <span class="nx">city</span><span class="o">:</span> <span class="s2">"San Francisco"</span><span class="p">},</span> 
  <span class="p">{</span><span class="nx">stateId</span><span class="o">:</span> <span class="mi">1</span><span class="p">,</span> <span class="nx">state</span><span class="o">:</span> <span class="s2">"CA"</span><span class="p">,</span> <span class="nx">city</span><span class="o">:</span> <span class="s2">"Los Angeles"</span><span class="p">},</span> 
  <span class="p">{</span><span class="nx">stateId</span><span class="o">:</span> <span class="mi">2</span><span class="p">,</span> <span class="nx">state</span><span class="o">:</span> <span class="s2">"OR"</span><span class="p">,</span> <span class="nx">city</span><span class="o">:</span> <span class="s2">"Eugene"</span><span class="p">}</span>
  <span class="p">{</span><span class="nx">stateId</span><span class="o">:</span> <span class="mi">2</span><span class="p">,</span> <span class="nx">state</span><span class="o">:</span> <span class="s2">"OR"</span><span class="p">,</span> <span class="nx">city</span><span class="o">:</span> <span class="s2">"St Helens"</span><span class="p">},</span> 
<span class="p">];</span>

<span class="kd">function</span> <span class="nx">expr</span><span class="p">(</span><span class="nx">item</span><span class="p">){</span><span class="k">return</span> <span class="nx">item</span><span class="p">.</span><span class="nx">stateId</span> <span class="o">+</span> <span class="s2">":"</span> <span class="o">+</span> <span class="nx">item</span><span class="p">.</span><span class="nx">state</span><span class="p">;}</span>

<span class="c1">//with an expression</span>
<span class="kd">var</span> <span class="nx">result</span> <span class="o">=</span> <span class="nx">listy</span><span class="p">(</span><span class="nx">source</span><span class="p">).</span><span class="nx">groupBy</span><span class="p">(</span><span class="s2">"stateId as expr($item)"</span><span class="p">,</span><span class="s2">"city"</span><span class="p">,{</span><span class="nx">expr</span><span class="o">:</span> <span class="nx">expr</span><span class="p">});</span>

<span class="c1">//with an expression and a grouping closure</span>

<span class="kd">var</span> <span class="nx">result</span> <span class="o">=</span> <span class="nx">listy</span><span class="p">(</span><span class="nx">source</span><span class="p">).</span><span class="nx">groupBy</span><span class="p">([</span><span class="s2">"stateId as expr($item)"</span><span class="p">,{</span><span class="nx">expr</span><span class="o">:</span> <span class="nx">expr</span><span class="p">}],</span><span class="kd">function</span><span class="p">(</span><span class="nx">grp</span><span class="p">){</span>
  <span class="k">return</span> <span class="nx">grp</span><span class="p">.</span><span class="nx">map</span><span class="p">(</span><span class="s2">"city"</span><span class="p">);</span>
<span class="p">});</span>

<span class="nx">expect</span><span class="p">(</span><span class="nx">result</span><span class="p">(</span><span class="s2">"{stateKey:key,cities:group()}"</span><span class="p">)).</span><span class="nx">toEqual</span><span class="p">([</span>
  <span class="p">{</span>
    <span class="nx">stateKey</span><span class="o">:</span> <span class="s2">"1:CA"</span><span class="p">,</span>
    <span class="nx">cities</span><span class="o">:</span> <span class="p">[</span><span class="s2">"Bakersfield"</span><span class="p">,</span><span class="s2">"San Francisco"</span><span class="p">,</span><span class="s2">"Los Angeles"</span><span class="p">]</span>
  <span class="p">},</span>  
  <span class="p">{</span>
    <span class="nx">stateKey</span><span class="o">:</span> <span class="s2">"2:OR"</span><span class="p">,</span>
    <span class="nx">cities</span><span class="o">:</span> <span class="p">[</span><span class="s2">"Portland"</span><span class="p">,</span><span class="s2">"Eugene"</span><span class="p">,</span><span class="s2">"St Helens"</span><span class="p">]</span>
  <span class="p">},</span>  
<span class="p">]);</span>
</pre></div>

<h2>
<a name="method-uniqueuniquekeyparam--listy" class="anchor" href="#method-uniqueuniquekeyparam--listy"><span class="octicon octicon-link"></span></a>method unique(uniqueKey,param?) =&gt; listy</h2>

<p>filters to unique values based on key</p>

<h2>
<a name="method-uniquesetuniquekeyparam--listy" class="anchor" href="#method-uniquesetuniquekeyparam--listy"><span class="octicon octicon-link"></span></a>method uniqueSet(uniqueKey,param?) =&gt; listy</h2>

<p>filters to unique values based on key, resulting in the set of keys unless otherwize specified</p>

<h2>
<a name="method-everyfilterparam--boolean" class="anchor" href="#method-everyfilterparam--boolean"><span class="octicon octicon-link"></span></a>method every(filter,param?) =&gt; boolean</h2>

<p>returns true if all items match the expression or closure predicate</p>

<h2>
<a name="method-somefilterparam--boolean" class="anchor" href="#method-somefilterparam--boolean"><span class="octicon octicon-link"></span></a>method some(filter,param?) =&gt; boolean</h2>

<p>returns true if some of the items match the expression or closure predicate</p>

<h2>
<a name="method-toarraymapparam--array" class="anchor" href="#method-toarraymapparam--array"><span class="octicon octicon-link"></span></a>method toArray(map?,param?) =&gt; array</h2>

<p>produces an array from the listy</p>

<h2>
<a name="method-togrouparraykeygroupitemgroupmapparam--array" class="anchor" href="#method-togrouparraykeygroupitemgroupmapparam--array"><span class="octicon octicon-link"></span></a>method toGroupArray(key,groupItem,groupMap,param?) =&gt; array</h2>

<p>produces an array of groups, with the children of the groups also an array</p>

<h2>
<a name="method-tohashkeyvalueparam--hash-function" class="anchor" href="#method-tohashkeyvalueparam--hash-function"><span class="octicon octicon-link"></span></a>method toHash(key,value,param?) =&gt; hash function</h2>

<p>produces a hash map for quick lookups based on key value pairs </p>

<h2>
<a name="method-first--var" class="anchor" href="#method-first--var"><span class="octicon octicon-link"></span></a>method first() =&gt; var</h2>

<p>retrieves the first item in a listy </p>

<h2>
<a name="method-last--var" class="anchor" href="#method-last--var"><span class="octicon octicon-link"></span></a>method last() =&gt; var</h2>

<p>retrieves the last item in a listy</p>

<h2>
<a name="method-letparam--var" class="anchor" href="#method-letparam--var"><span class="octicon octicon-link"></span></a>method let(param) =&gt; var</h2>

<p>sets the params in a listy to be used with all subsequent expressions</p>
      </section>
    </div>

    <!-- FOOTER  -->
    <div id="footer_wrap" class="outer">
      <footer class="inner">
        <p class="copyright">Listy-for-ng maintained by <a href="https://github.com/nmuhonen">nmuhonen</a></p>
        <p>Published with <a href="http://pages.github.com">GitHub Pages</a></p>
      </footer>
    </div>

    

  </body>
</html>
